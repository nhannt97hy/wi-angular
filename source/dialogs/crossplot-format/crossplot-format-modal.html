<div class="modal fade" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div ng-show="wiModal.updating" id='spinner-holder'></div>
            <div class="modal-header">
                <button type="button" class="close" ng-click="wiModal.onCancelButtonClicked();" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Crossplot Format</h4>
            </div>
            <div class="modal-body padding-0 dialog-style" style='overflow: auto;'>
                <wi-tabset>
                    <wi-tab heading="Curves Selections">
                        <div class="container-fluid">
                            <form class="form-horizontal form-condensed">
                                <div style='padding:10px;display:flex;flex-direction:row;height:100%;'>
                                    <div class='panel panel-default tree-side'>
                                        <div class='panel-heading' style='display: flex;'>
                                            <h5 style="flex:1" class="margin-top-0_5em">Data type</h5>
                                            <div style='flex:2;text-align: right;'>
                                                <label class="btn btn-default" ng-click="wiModal.onSelectionTypeChanged(wiModal.FAMILY_GROUP_SELECTION)" ng-class='{active: wiModal.selectionType==wiModal.FAMILY_GROUP_SELECTION}'
                                                    style="margin-right: 5px;" title='Family Group'>
                                                    <span class='zone-table-16x16'></span>
                                                </label>
                                                <label class="btn btn-default  " ng-click="wiModal.onSelectionTypeChanged(wiModal.FAMILY_SELECTION)" ng-class='{active: wiModal.selectionType==wiModal.FAMILY_SELECTION}'
                                                    style="margin-right: 5px;" title='Family'>
                                                    <span class='user-define-16x16'></span>
                                                </label>
                                                <label class="btn btn-default  " ng-click="wiModal.onSelectionTypeChanged(wiModal.CURVE_SELECTION)" ng-class='{active: wiModal.selectionType==wiModal.CURVE_SELECTION}'
                                                    title='Curve'>
                                                    <span class='curve-16x16'></span>
                                                </label>
                                            </div>
                                        </div>
                                        <div style='position:relative;margin: 5px;'>
                                            <i style="position:absolute;line-height:2.5em;left:0.5em;font-size:14px;" class="fa fa-search"></i>
                                            <input wi-enter="wiModal.onFilterEnterKey(wiModal.filterText1);" style='text-indent:1.5em;' class='form-control' type='text'
                                                ng-model='wiModal.filterText1'>
                                        </div>
                                        <div style="flex:2;display:flex;overflow-x:hidden;overflow-y:auto;background-color:white;">
                                            <wi-scroll id-scroll='"selectionScroll"' style='flex:1;display:flex;flex-direction:column' up-trigger="wiModal.upTrigger"
                                                down-trigger="wiModal.downTrigger">
                                                <wi-base-treeview config='wiModal.selectionList' on-click-function="wiModal.onClick" filter="{{wiModal.selectionType == wiModal.FAMILY_SELECTION?wiModal.filterText:wiModal.filterText1}}"
                                                    name='wiCrossplotFormatModalSelectionTreeName'>
                                                </wi-base-treeview>
                                            </wi-scroll>
                                        </div>
                                    </div>
                                    <div style="margin-left:5px;flex:2;padding:0px 5px; display:flex; flex-direction: column;">
                                        <div style="flex:1;display:flex;overflow: hidden;flex-direction: column;" class='panel panel-default'>
                                            <div class="panel-heading">
                                                <h5>Inputs</h5>
                                            </div>
                                            <ul style='padding-left:0;margin: 5px;flex:1;overflow-y: auto;'>
                                                <li style="display:flex;flex-direction:row; margin-bottom:5px;" ng-repeat="item in wiModal.taskConfig.inputs">
                                                    <div style='flex:1;margin-right:5px;'>
                                                        <button style='width:100%;vertical-align:baseline;' class="btn btn-default" type="button" ng-click="wiModal.onSelectTemplate($index)">{{item.name}}
                                                            <i class="fa fa-chevron-right" aria-hidden="true"></i>
                                                        </button>
                                                    </div>
                                                    <div style="flex:2;position:relative;">
                                                        <span ng-class="{'zone-table-16x16': item.type==wiModal.FAMILY_GROUP_SELECTION, 'user-define-16x16': item.type==wiModal.FAMILY_SELECTION, 'curve-16x16': item.type==wiModal.CURVE_SELECTION}"
                                                            style='position:absolute;top:50%;transform:translateY(-50%);left:0.5em;'></span>
                                                        <input type="text" style='padding-left:2em;' class='form-control' ng-model='item.label' disabled>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        <div style="flex:1;display:flex;overflow: hidden;flex-direction: column;" class='panel panel-default'>
                                            <div class="panel-heading">
                                                <h5>Default Parameters</h5>
                                            </div>
                                            <ul style='padding-left:0;margin: 5px;flex:1;overflow-y: auto;'>
                                                <li style="display:flex;flex-direction:row; margin-bottom:5px;" ng-repeat="item in wiModal.taskConfig.parameters track by $index">
                                                    <label style='flex:1;text-align:center;line-height: 2.5em;font-size: 14px;'>{{item.name}}</label>
                                                    <input type="number" class="form-control" ng-model="item.value" step="any" ng-if="item.type=='number'" style="flex:2;">
                                                    <select class='form-control' ng-model='item.value' ng-options="choice as choice.name for choice in item.choices track by choice.value"
                                                        ng-if='item.type=="select"' style="flex:2;"></select>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </wi-tab>
                    <wi-tab heading="Datasets Selections" on-show="wiModal.onTabChange">
                        <div class="container-fluid">
                            <form class="form-condensed">
                                <div style="height:100%;display:flex;flex-direction:row;padding:10px;">
                                    <div class="panel panel-default tree-side">
                                        <div style='display:flex;' class='panel-heading'>
                                            <h5>Project</h5>
                                        </div>
                                        <div style='margin: 5px;position: relative;'>
                                            <i style="position:absolute;line-height:2.5em;left:0.5em;font-size:14px;" class="fa fa-search"></i>
                                            <input type='text' class='form-control' style='text-indent:1.5em;' ng-if='wiModal.idxTab==0' ng-model='wiModal.prjFilter'
                                                size='20'>
                                            <input type='text' class='form-control' style='text-indent:1.5em;' ng-if='wiModal.idxTab==1' ng-model='wiModal.zoneFilter'
                                                size='20'>
                                        </div>
                                        <div style='flex:1;display:flex;flex-direction:column;'>
                                            <wi-base-treeview id='{{wiModal.projectTreeName}}' name="wiCrossplotFormatModalProjectTreeName"
                                            config="wiModal.projectConfig" container="wiModal"
                                            on-click-function="wiModal.prjClickFunction"
                                            on-ready-function='wiModal.onPrjReady'
                                            filter="{{wiModal.prjFilter}}">
                                            </wi-base-treeview>
                                        </div>
                                    </div>
                                    <div class='wi-droppable' style="flex:2;margin-left: 5px;" wi-element-ready="wiModal.droppableSetting();">
                                        <div class="panel panel-default" style='height: 100%;display:flex;flex-direction: column;'>
                                            <div class="panel-heading">
                                                <h5>Input Data</h5>
                                                <wi-item-dropdown ng-show='!wiModal.isFrozen' style='flex:1;margin:5px 0;' class='height24px' icon="'project-open-16x16'" on-wi-dropdown-init='wiModal.getProjectList'
                                                on-item-changed="wiModal.projectChanged">
                                                </wi-item-dropdown>
                                            </div>
                                            <div style='margin: 5px;position: relative;'>
                                                <i style="position:absolute;line-height:2.5em;left:0.5em;font-size:14px;" class="fa fa-search"></i>
                                                <input type='text' class='form-control' style='text-indent:1.5em;' ng-model='wiModal.inputFilter' size='10'>
                                            </div>
                                            <div style="flex: 1; position: relative; overflow-y: auto;">
                                                <wi-base-treeview id='{{wiModal.taskDataTreeName}}' name='wiCrossplotFormatModalTaskDataTreeName' style="margin-left: 0px;" config='wiModal.taskConfig.inputData'
                                                on-click-function='wiModal.taskClickFuntion' show-context-menu-function='wiModal.taskShowContextMenu'
                                                filter='{{wiModal.inputFilter}}' filter-by='{{wiModal.typeFilter}}'>
                                                </wi-base-treeview>
                                                <div ng-if="!wiModal.taskConfig.inputData.length" class='dropLabel'>DROP DATASET HERE</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </wi-tab>
                    <wi-tab heading="Configurations">
                        <div class="container-fluid">
                            <form class="form-horizontal form-condensed">
                                <div class="row">
                                    <div class="col-sm-6 text-center padding-bottom-0_5em padding-top-1em">
                                        <div class="row padding-bottom-0_5em">
                                            <strong>Scales</strong>
                                        </div>
                                        <div class="row padding-bottom-0_5em">
                                            <label class="margin-bottom-0 margin-top-0_25em col-sm-2 font-weight-normal">Left</label>
                                            <div class="col-sm-3 padding-right-0 padding-left-0">
                                                <input type="number" class="form-control wi-form-control" id="scaleLeft" ng-model="wiModal.config.scale.left"
                                                    ng-change="wiModal.checkLogValueX(wiModal.config.scale.left, 'scaleLeft')">
                                            </div>
                                            <label class="margin-bottom-0 margin-top-0_25em col-sm-2 font-weight-normal">Right</label>
                                            <div class="col-sm-3 padding-right-0 padding-left-0">
                                                <input type="number" class="form-control wi-form-control" id="scaleRight" ng-model="wiModal.config.scale.right"
                                                    ng-change="wiModal.checkLogValueX(wiModal.config.scale.right, 'scaleRight')">
                                            </div>
                                            <div class="col-sm-2">
                                                <label class="font-weight-normal">
                                                    <input type="checkbox" value="" ng-model="wiModal.config.logX" ng-change="wiModal.checkLogStatus()">Log
                                                </label>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <label class="margin-bottom-0 margin-top-0_25em col-sm-2 font-weight-normal">Bottom</label>
                                            <div class="col-sm-3 padding-right-0 padding-left-0">
                                                <input type="number" class="form-control wi-form-control" id="scaleBottom" ng-model="wiModal.config.scale.bottom"
                                                    ng-change="wiModal.checkLogValueY(wiModal.config.scale.bottom, 'scaleBottom')">
                                            </div>
                                            <label class="margin-bottom-0 margin-top-0_25em col-sm-2 font-weight-normal">Top</label>
                                            <div class="col-sm-3 padding-right-0 padding-left-0">
                                                <input type="number" class="form-control wi-form-control" id="scaleTop" ng-model="wiModal.config.scale.top"
                                                    ng-change="wiModal.checkLogValueY(wiModal.config.scale.top, 'scaleTop')">
                                            </div>
                                            <div class="col-sm-2">
                                                <label class="font-weight-normal">
                                                    <input type="checkbox" value="" ng-model="wiModal.config.logY" ng-change="wiModal.checkLogStatus()">Log
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-sm-3 text-center padding-bottom-0_5em padding-top-1em">
                                        <div class="padding-bottom-0_5em">
                                            <strong>Major</strong>
                                        </div>
                                        <div class="padding-bottom-0_5em">
                                            <input type="number" class="form-control wi-form-control" ng-model="wiModal.config.majorX">
                                        </div>
                                        <div>
                                            <input type="number" class="form-control wi-form-control" ng-model="wiModal.config.majorY">
                                        </div>
                                    </div>
                                    <div class="col-sm-3 text-center padding-bottom-0_5em padding-top-1em">
                                        <div class="padding-bottom-0_5em">
                                            <strong>Minor</strong>
                                        </div>
                                        <div class="padding-bottom-0_5em">
                                            <input type="number" class="form-control wi-form-control" ng-model="wiModal.config.minorX">
                                        </div>
                                        <div>
                                            <input type="number" class="form-control wi-form-control" ng-model="wiModal.config.minorY">
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div style="height:100%;display:flex;flex-direction:row;padding:10px;">
                                    <div class="panel panel-default tree-side">
                                        <div style="flex: 1; position: relative; overflow-y: auto;">
                                            <wi-base-treeview id='{{wiModal.taskDataTreeName}}' name='wiCrossplotFormatModalTaskDataTreeName' style="margin-left: 0px;" config='wiModal.taskConfig.inputData'>
                                            </wi-base-treeview>
                                        </div>
                                    </div>
                                    <div style="flex:2;margin-left: 5px;">
                                        <div class="panel panel-default" style='height: 100%;display:flex;flex-direction: column;'>
                                            <ul>
                                                <li style="list-style-type: none"
                                                ng-repeat="props in wiModal.curvesProperties"
                                                ng-if="props.flag != 'delete'">
                                                    <div class="row">
                                                        <div class="col-sm-5">
                                                            <div class="form-group">
                                                                <label class="col-sm-4 font-weight-normal">Symbol</label>
                                                                <div class="col-sm-8">
                                                                    <ui-select theme="bootstrap"
                                                                        ng-model="props.options.pointSymbol"
                                                                        ng-change="wiModal.onChange(props)"
                                                                        search-enabled='false'>
                                                                        <ui-select-match>
                                                                            <div ng-repeat="type in wiModal.pointSymbolList"
                                                                                ng-if="props.options.pointSymbol==type">
                                                                                <canvas id="{{type}}-match-{{props.idWell}}" class="valign-bottom" width="20" height="20" wi-element-ready="wiModal.drawIcon(type+'-match-'+props.idWell, type)"></canvas>{{type}}
                                                                            </div>
                                                                        </ui-select-match>
                                                                        <ui-select-choices repeat="type in wiModal.pointSymbolList" position="down">
                                                                            <canvas id="{{type}}" width="20" height="20" class="valign-bottom" wi-element-ready="wiModal.drawIcon(type, type)"></canvas>&nbsp;{{type}}
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-4">
                                                            <div class="form-group">
                                                                <label class="col-sm-4 font-weight-normal">Size</label>
                                                                <div class="col-sm-8">
                                                                    <input type="number" class="form-control wi-form-control"
                                                                        ng-model="props.options.pointSize"
                                                                        ng-change="wiModal.onChange(props)">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3">
                                                            <div class="form-group">
                                                                <label class="col-sm-3 font-weight-normal">Color</label>
                                                                <div class="col-sm-9">
                                                                    <div class="float-left">
                                                                        <button type="button" ng-click="wiModal.colorSymbol(props);"
                                                                            ng-style="{'background-color':props.options.pointColor}"
                                                                            class="form-control wi-form-control width-80px thick-border">
                                                                        </button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </wi-tab>
                </wi-tabset>
                <div id="dragObjElement"></div>
            </div>
            <div class="modal-footer">
                <button ng-show='!wiModal.hideApply' type="button" ng-click="wiModal.onApplyButtonClicked()" class="btn btn-default">
                    <span class="apply-16x16"></span>&nbsp;Apply</button>
                <button type="button" ng-click="wiModal.onOkButtonClicked()" class="btn btn-default">
                    <span class="ok-16x16"></span>&nbsp;OK</button>
                <button type="button" ng-click="wiModal.onCancelButtonClicked()" class="btn btn-default">
                    <span class="close-16x16"></span>&nbsp;Cancel</button>
            </div>
        </div>
    </div>
    <style>
        .margin-bottom-0 {
            margin-bottom: 0;
        }

        .margin-top-0_25em {
            margin-top: 0.25em;
        }

        .margin-top-0_5em {
            margin-top: 0.5em;
        }

        wi-tabset>div {
            height: calc(100% - 180px);
        }

        .bordered {
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        wi-tab .tree-side {
            display: flex;
            flex-direction: column;
            padding: 0;
            flex: 1;
            overflow: hidden;
            background-color: #ffffff;
            margin-bottom: 0;
        }

        wi-tab .panel-heading {
            padding-top: 5px;
            padding-bottom: 5px;
        }

        .height24px span.btn.btn-default {
            line-height: 20px;
            height: 24px;
        }

        .ui-select-bootstrap>ul.ui-select-choices,
        .ui-select-bootstrap>ul.ui-select-no-choice {
            position: fixed;
            top: auto;
            left: auto;
            width: inherit;
        }

        #dragObjElement .wi-parent-node {
            padding: 5px;
            background-color: #eee;
            border: 1px solid steelblue;
            border-radius: 5px;
        }

        #dragObjElement .icon-expanded {
            display: none;
        }

        .dropLabel {
            position: absolute;
            top: 50%;
            text-align: center;
            width: 100%;
            font-size: 48px;
            transform: translateY(-50%);
            color: #aaa;
        }
    </style>
</div>