<form class="form-horizontal properties-block">
	<div ng-repeat="section in self.getSections(self.section)">
		<div class="heading" ng-click="self.shown[$index]=!self.shown[$index]"
			ng-if="section!='null'">
			<span>{{section}}</span>
			<span ng-if="!section && self.getFieldsOfSection(section, self.fields)">General</span>
			<span style="float: right;" ng-if="self.getShown(section, self.getSections(self.section))"><i class="ti-minus"></i></span>
			<span style="float: right;" ng-if="!self.getShown(section, self.getSections(self.section))"><i class="ti-plus"></i></span>
		</div>
		<div class='form-group properties-group' ng-if="self.getShown(section, self.getSections(self.section))"
				ng-repeat="field in self.getFieldsOfSection(section, self.fields)" ng-hide="!field.use">
			<label class="control-label col-sm-5" style=" text-align: left; padding: 5px"
					title="{{field.label || field.name}}">{{field.label || field.name}}</label>
			<div class="col-sm-7" style="padding: 0">
				<input ng-if="field.type=='text'||field.type=='number'||field.type=='checkbox'"
						class="form-control props-input"
						type="{{field.type||'text'}}" 
						ng-model="field.value" placeholder="{{field.label||field.name}}" 
						ng-readonly="{{field.readOnly}}"
						wi-enter="self.doChange(field);">
				<div ng-if="field.type=='wicolor'" 
					class="wicolor">
					<button ng-click="self.changeColor(field, self.fields)" 
                            ng-style="{'background-color':field.value}"
                            class="form-control wi-form-control thick-border" 
                            style="margin:5px;width:100px;height:20px;">
                    </button>
				</div>
				<div ng-if="field.type=='wipattern'" 
					class="wipattern" style="text-align: center;">
					<button ng-click="self.changePattern(field, self.fields)"
                            class="btn btn-default" style="padding: 0; border: none;">
                        <wi-canvas-rect name="_pattern{{field.name}}"
                                        pattern="{{field.value.name}}"
                                        width="100" height="20"
                                        foreground="{{field.value.foreground}}"
                                        background='{{field.value.background}}'>
                        </wi-canvas-rect>
                    </button>
				</div>
				<div ng-if="field.type=='wifamily'" 
					class="wifamily" style="text-align: center;">
					<button ng-click="self.changeFamily(field, self.fields)"
                            class="btn btn-default" 
                            style="border: none;margin:auto;width: 100%;text-align: left;font-size: 12px;">
                            {{field.value.name}}<span class="family-edit-16x16"></span>
                    </button>
				</div>
				<div ng-if="field.type=='wizoneset'" 
					style="padding:5px;">
					<a ng-click="self.changeZoneSet(field, self.fields)"
                        style="padding-right: 40%; cursor: pointer; text-decoration: none;">
                        {{field.value.name}} &nbsp;<span class="zone-edit-16x16"></span>
                    </a>
				</div>
				<div ng-if="field.type=='wicompatiable'" 
					style="padding:5px;">
					<select ng-model="field.value" style="width: 100%; border: none;" 
							ng-options="unit.name as unit.name for unit in self.curveUnits"
							ng-change="self.onChangeUnit(field, self.fields)">
					</select>
				</div>
			</div>
		</div>
	</div>
</form>